const { expect } = require("chai");
const hre = require("hardhat");
const {ethers} = require('hardhat');
const axios = require("axios");

describe("Verifier", () => {
  it("should query ", async () => {
    const options = {

      method: 'POST',

      url: 'http://3.23.60.176:4000/prove',

      headers: {Accept: 'application/json', 'Content-Type': 'application/json'},

      data: {

        msg: 'af82',

        pubkeys: [

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025',

          'fc51cd8e6218a1a38da47ed00230f0580816ed13ba3303ac5deb911548908025'

        ],

        sigs: [

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a',

          '6291d657deec24024827e69c3abe01a30ce548a284743a445e3680d7db5ac3ac18ff9b538d16f290ae67f760984dc6594a7c15e9716ed28dc027beceea1ec40a'

        ]

      }

    };


    axios.request(options).then(function (response) {
      console.log(response.data);
      expect(response.data !== undefined);
      expect (response.data.id !== undefined);
    }).catch(function (error) {
      console.error(error);
      expect(false);
    });
  })
  
  let calldata;
  it("should be to able to query calldata for returned id", async() => {
    const id = '1de8eec0-5b8e-4a32-a5dc-c7a5fae5bd16';
    const options = {
      method: 'GET',
      url: `http://3.23.60.176:4000/proof/${id}`
    }

    const response = await axios.request(options);
    console.log(response.data);
    expect(response.data !== undefined);
    expect (response.data.calldata !== undefined);

    calldata = response.data.calldata;
  })

  // it("should be able to verify calldata", async() => {
  //   const Verifier = await ethers.getContractFactory("Verifier");
  //   const verifier = await Verifier.deploy();
  //   await verifier.deployed();

  //   console.log(JSON.parse(calldata));
  // })
});